(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-343ecba4"],{"0944":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"message-banner",style:e.cover},[s("div",{staticClass:"message-container"},[s("h1",{staticClass:"message-title"},[e._v("留言板")]),s("div",{staticClass:"animated fadeInUp message-input-wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageContent,expression:"messageContent"}],attrs:{placeholder:"说点什么吧"},domProps:{value:e.messageContent},on:{click:function(t){e.show=!0},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addToList(t)},input:function(t){t.target.composing||(e.messageContent=t.target.value)}}}),s("button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"ml-3 animated bounceInLeft",on:{click:e.addToList}},[e._v(" 发送 ")])])]),s("div",{staticClass:"barrage-container"},[s("vue-baberrage",{attrs:{barrageList:e.barrageList},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",{staticClass:"barrage-items"},[s("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.item.avatar,width:"30",height:"30"}}),s("span",{staticClass:"ml-2"},[e._v(e._s(t.item.nickname)+" :")]),s("span",{staticClass:"ml-2"},[e._v(e._s(t.item.messageContent))])])]}}])})],1)])])},n=[],i=(s("4160"),s("498a"),s("159b"),{mounted:function(){this.listMessage()},data:function(){return{show:!1,messageContent:"",barrageList:[]}},methods:{addToList:function(){var e=this;if(""==this.messageContent.trim())return this.$toast({type:"error",message:"留言不能为空"}),!1;var t=this.$store.state.avatar?this.$store.state.avatar:this.$store.state.blogInfo.websiteConfig.touristAvatar,s=this.$store.state.nickname?this.$store.state.nickname:"游客",a={avatar:t,nickname:s,messageContent:this.messageContent,time:Math.floor(3*Math.random())+7};this.messageContent="",this.axios.post("/api/messages",a).then((function(t){var s=t.data;s.flag?(e.barrageList.push(a),e.$toast({type:"success",message:"留言成功"})):e.$toast({type:"error",message:s.message})}))},listMessage:function(){var e=this;this.axios.get("/api/messages").then((function(t){var s=t.data;s.flag&&(e.barrageList=s.data)}))}},computed:{cover:function(){var e="";return this.$store.state.blogInfo.pageList.forEach((function(t){"message"==t.pageLabel&&(e=t.pageCover)})),"background: url("+e+") center center / cover no-repeat"}}}),r=i,o=(s("e3fd"),s("2877")),c=Object(o["a"])(r,a,n,!1,null,"2ef2f8b2",null);t["default"]=c.exports},"3e5a":function(e,t,s){},e3fd:function(e,t,s){"use strict";var a=s("3e5a"),n=s.n(a);n.a}}]);